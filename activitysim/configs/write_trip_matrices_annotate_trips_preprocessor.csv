Description,Target,Expression
# add additional fields,,
,tour_participants,trips.tour_id.map(tours.number_of_participants)
,distance,od_skims['DIST']
# code time periods,,
,is_nt,"(trips.depart.between(time_periods['NT1']['first_hour'], time_periods['NT1']['last_hour'])) | (trips.depart.between(time_periods['NT2']['first_hour'], time_periods['NT2']['last_hour']))"
,is_am,"trips.depart.between(time_periods['AM']['first_hour'], time_periods['AM']['last_hour'])"
,is_md,"trips.depart.between(time_periods['MD']['first_hour'], time_periods['MD']['last_hour'])"
,is_pm,"trips.depart.between(time_periods['PM']['first_hour'], time_periods['PM']['last_hour'])"
#,is_ev,"trips.depart.between(time_periods['EV']['first_hour'], time_periods['EV']['last_hour'])"
# nt trips,,
,DRIVEALONE_NT,((trips.trip_mode == 'DRIVEALONE') & is_nt) * tour_participants
,SHARED2_NT,"((trips.trip_mode.isin(['SHARED2', 'TAXI', 'TNC_SINGLE'])) & is_nt) * tour_participants / OCC_SHARED2"
,SHARED3_NT,"((trips.trip_mode.isin(['SHARED3', 'TNC_SHARED'])) & is_nt) * tour_participants / OCC_SHARED3"
,WALK_NT,((trips.trip_mode == 'WALK') & is_nt) * tour_participants
,BIKE_NT,((trips.trip_mode == 'BIKE') & is_nt) * tour_participants
,TRNWALKACCESS_NT,((trips.trip_mode == 'TRNWALKACCESS') & is_nt) * tour_participants
,TRNDRIVEACCESS_NT,((trips.trip_mode == 'TRNDRIVEACCESS') & is_nt) * tour_participants
,SCHOOLBUS_NT,((trips.trip_mode == 'SCHOOLBUS') & is_nt) * tour_participants
,TAXI_NT,((trips.trip_mode == 'TAXI') & is_nt) * tour_participants
,TNC_SINGLE_NT,((trips.trip_mode == 'TNC_SINGLE') & is_nt) * tour_participants
,TNC_SHARED_NT,((trips.trip_mode == 'TNC_SHARED') & is_nt) * tour_participants
# am trips,,
,DRIVEALONE_AM,((trips.trip_mode == 'DRIVEALONE') & is_am) * tour_participants
,SHARED2_AM,"((trips.trip_mode.isin(['SHARED2', 'TAXI', 'TNC_SINGLE'])) & is_am) * tour_participants / OCC_SHARED2"
,SHARED3_AM,"((trips.trip_mode.isin(['SHARED3', 'TNC_SHARED'])) & is_am) * tour_participants / OCC_SHARED3"
,WALK_AM,((trips.trip_mode == 'WALK') & is_am) * tour_participants
,BIKE_AM,((trips.trip_mode == 'BIKE') & is_am) * tour_participants
,TRNWALKACCESS_AM,((trips.trip_mode == 'TRNWALKACCESS') & is_am) * tour_participants
,TRNDRIVEACCESS_AM,((trips.trip_mode == 'TRNDRIVEACCESS') & is_am) * tour_participants
,SCHOOLBUS_AM,((trips.trip_mode == 'SCHOOLBUS') & is_am) * tour_participants
,TAXI_AM,((trips.trip_mode == 'TAXI') & is_am) * tour_participants
,TNC_SINGLE_AM,((trips.trip_mode == 'TNC_SINGLE') & is_am) * tour_participants
,TNC_SHARED_AM,((trips.trip_mode == 'TNC_SHARED') & is_am) * tour_participants
# md trips,,
,DRIVEALONE_MD,((trips.trip_mode == 'DRIVEALONE') & is_md) * tour_participants
,SHARED2_MD,"((trips.trip_mode.isin(['SHARED2', 'TAXI', 'TNC_SINGLE'])) & is_md) * tour_participants / OCC_SHARED2"
,SHARED3_MD,"((trips.trip_mode.isin(['SHARED3', 'TNC_SHARED'])) & is_md) * tour_participants / OCC_SHARED3"
,WALK_MD,((trips.trip_mode == 'WALK') & is_md) * tour_participants
,BIKE_MD,((trips.trip_mode == 'BIKE') & is_md) * tour_participants
,TRNWALKACCESS_MD,((trips.trip_mode == 'TRNWALKACCESS') & is_md) * tour_participants
,TRNDRIVEACCESS_MD,((trips.trip_mode == 'TRNDRIVEACCESS') & is_md) * tour_participants
,SCHOOLBUS_MD,((trips.trip_mode == 'SCHOOLBUS') & is_md) * tour_participants
,TAXI_MD,((trips.trip_mode == 'TAXI') & is_md) * tour_participants
,TNC_SINGLE_MD,((trips.trip_mode == 'TNC_SINGLE') & is_md) * tour_participants
,TNC_SHARED_MD,((trips.trip_mode == 'TNC_SHARED') & is_md) * tour_participants
# pm trips,,
,DRIVEALONE_PM,((trips.trip_mode == 'DRIVEALONE') & is_pm) * tour_participants
,SHARED2_PM,"((trips.trip_mode.isin(['SHARED2', 'TAXI', 'TNC_SINGLE'])) & is_pm) * tour_participants / OCC_SHARED2"
,SHARED3_PM,"((trips.trip_mode.isin(['SHARED3', 'TNC_SHARED'])) & is_pm) * tour_participants / OCC_SHARED3"
,WALK_PM,((trips.trip_mode == 'WALK') & is_pm) * tour_participants
,BIKE_PM,((trips.trip_mode == 'BIKE') & is_pm) * tour_participants
,TRNWALKACCESS_PM,((trips.trip_mode == 'TRNWALKACCESS') & is_pm) * tour_participants
,TRNDRIVEACCESS_PM,((trips.trip_mode == 'TRNDRIVEACCESS') & is_pm) * tour_participants
,SCHOOLBUS_PM,((trips.trip_mode == 'SCHOOLBUS') & is_pm) * tour_participants
,TAXI_PM,((trips.trip_mode == 'TAXI') & is_pm) * tour_participants
,TNC_SINGLE_PM,((trips.trip_mode == 'TNC_SINGLE') & is_pm) * tour_participants
,TNC_SHARED_PM,((trips.trip_mode == 'TNC_SHARED') & is_pm) * tour_participants